# Directory organization
Scripts need to be stored in the following format. R scripts in the Rstudio directory assume that the current directory is the mapping directory and can be used in Rstudio by setting its "Project" directory as the mapping directory.  


- Format
```
scripts/
└── NAME/
    ├── lib/
    └── main/
        └── Rstudio/
```

- Example
```
scripts/
└── MouseResection/
    ├── lib/
    └── main/
        └── Rstudio/
```

# Mapping reads
1. Rename directories and files of fastq data according to instructions in mapping/FASTQ/readme.txt.
2. Store the fastq files to mapping/FASTQ/.
3. Duplicate “template_mapping_mouse.sh” in /mapping/scripts/MouseResection/main/ and rename the file such as "Project_XXX_mapping_mouse.sh"
4. Open "Project_XXX_mapping_mouse.sh", modify "PROGECT", "NAME" and "GENOME" and save the script in /mapping/scripts/MouseResection/main/
5. Run the script by typing “bash <path to Project_XXX_mapping_mouse.sh>" and ENTER in the Terminal. Outputs will be stored in /mapping/MAP/Project_XXX/GENOME/.


# Plotting profiles using R scripts
1. Create a "DATASETNAME" directory in mapping/matrix.Rdata/ and copy matrix.Rdata and rpm.txt files generated by a mapping script to mapping/matrix.Rdata/DATASETNAME. DATASETNAME will be used to make output file names. If there is one replicate, DATASETNAME can be the same as NAME specified in a mapping script. If there are replicates of "wt" samples, "wt1", and "wt2", for example, matrix.Rdata and rpm.txt files of "wt1" and "wt2" can be stored together in mapping/matrix.Rdata/wt. The "wt1" and "wt2" data will be averaged and output file names will contain "wt". If the "PROJECT", "NAME" and "GENOME" in the mapping script are set as "Project_XXX", "NAME" and "mm10", respectively, the following matrix.Rdata and rpm.txt files are stored in mapping/Project_XXX/mm10/NAME/.
- hotspot.center.SPO11.B6.Cell.mmc2.bed.NAME.F.halfwin.5600.matrix.Rdata
- hotspot.center.SPO11.B6.Cell.mmc2.bed.NAME.R.halfwin.5600.matrix.Rdata
- NAME.rpm.txt
2. Duplicate an R script in /mapping/scripts/MouseResection/main/R/ and rename the file such as "20240711_1_mean.profiles.around.SPO11-oligo.hotspot.centers_wt.R".
3. Open RStudio and select "Open Project" on the top right to select "mapping.Rproj" in the "mapping" directory.
4. Open "20240711_1_mean.profiles.around.SPO11-oligo.hotspot.centers_wt.R" in RStudio and modify the "workdir" and "sample.names" variables. The "workdir" variable specifies a path to a directory where outputs of the R script will be saved. The "sample.names" specifies "NAME" or the sample name(s) of matrix.Rdata file(s). If multiple NAMEs are set as a character vector, samples will be averaged. (Option) Modify other variables such as those to set threshold values to optimize the script to analyze samples of interest.
5. Run the script in Rstudo and modify variables such as threshold if necessary. Output PDF files can be further edited in illustrator.
